import{r as i,i as k}from"./react.7dc093bc.js";import{F as o,u as B,a as R,j as D,R as x,C as p,S as m}from"./index.23fdf5e3.js";import{j as u,a as e}from"./index.d55409d3.js";import{S as E}from"./index.12d27e58.js";import"./lodash.71f9f2ff.js";const{Option:O}=m,K=()=>{const[g]=o.useForm(),[C,$]=i.exports.useState([]),[s,w]=i.exports.useState([]),[h,S]=i.exports.useState(""),[v,b]=i.exports.useState(""),[A,l]=i.exports.useState(!1);B(()=>{F()});async function F(){let t=await R();$(t||[]),t.length>0&&(g.setFieldsValue({category:t[0]}),f(t[0]))}async function f(t){l(!0);try{S(t);let{date:a,results:r}=await D(t);b(a),w(r),j(t,r),l(!1)}catch{l(!1)}}function j(t,a){console.log(a);for(let r=0;r<a.length;r++){const c=a[r];I(c,t,r)}}function I(t,a,r){const c=`${a}-${t.title}`,L=document.getElementById(`${c}`);k(L).setOption({xAxis:{type:"category",data:t.xAxis},title:{left:"center",text:`${t==null?void 0:t.title}`},yAxis:{type:"value",name:"s"},tooltip:{trigger:"axis",position:function(n){return r%3==2?"right":r%3==1?n:[n[0]+10,0]},formatter(n){let y=`<div style="width: 500px; white-space: normal;word-wrap: break-word;">${t.sql}</div>$<span style="display:inline-block;">${t.version}</span></br>`;return n.forEach((d,q)=>{y+=`<div>${d.marker} ${d.name}:${d.data}</div>`}),y}},series:[{data:t.lines.map(n=>n.toFixed(4)),type:"bar",itemStyle:{normal:{label:{show:!0}}}}]})}return u("div",{children:[e(o,{form:g,initialValues:{category:h},children:u(x,{gutter:20,children:[e(p,{span:4,children:e(o.Item,{name:"category",label:"Category",children:e(m,{onChange:f,children:C.map((t,a)=>e(O,{value:t,children:t},a))})})}),e(p,{span:6,children:e(o.Item,{label:"Latest",children:u("span",{children:[v," (",s&&s.length>0&&s[0].version,")"]})})})]})}),e(E,{spinning:A,children:e(x,{style:{minHeight:"400px"},children:s==null?void 0:s.map(t=>e(p,{span:8,style:{marginBottom:"20px"},children:e("div",{style:{height:"300px",width:"100%"},id:`${h}-${t.title}`})},t.title))})})]})};export{K as default};
